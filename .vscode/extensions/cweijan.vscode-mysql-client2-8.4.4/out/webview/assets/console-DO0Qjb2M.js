import{a as L,f as V,n as ee,h as n,ag as oe,o as g,H as D,D as G,r as b,v as f,ar as P,q as A,w as o,t,k as e,j as h,M as E,L as u,e as H,O as J,g as R,P as te,y as Q,$ as W,F as I,G as M}from"./app-DzbCtFXP.js";import{E as T}from"./index-CUEiWVIM.js";import{E as ne,a as se}from"./index-oud-VZj9.js";import{E as le}from"./index-ClCwDGTK.js";import"./index-CAvTKiYZ.js";import"./index-B2LYU3pt.js";import"./isEqual-BdMtZB5P.js";import"./index-B4FfeFwV.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-QnkWekc2.js";import"./castArray-DVv5FlX5.js";const ie={class:"card"},ae=L({__name:"Card",props:{full:Boolean},setup(x){return(c,m)=>(g(),V("div",{class:ee(["card-container",{"card-container-full":x.full}])},[n("div",ie,[oe(c.$slots,"default",{},void 0,!0)])],2))}}),N=D(ae,[["__scopeId","data-v-585e1b11"]]),re={style:{"min-width":"290px"}},ce={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},ue={class:"mt-4 mb-2 flex items-center"},de={class:"mr-2"},me={class:"mt-4 mb-2"},pe={class:"mr-2"},ve={class:"text-right mt-2"},fe={class:"mt-4 mb-2 inline-flex-plus btn"},_e={class:"mr-1 shrink-0"},ge={class:"text-right mt-2"},ye=L({__name:"ConnectionConfig",setup(x){const c=G(),m=b(!1),d=b(!1);f.on("importConfirm",()=>{m.value=!0}).on("importWorkspaceConfirm",()=>{d.value=!0}).on("importResult",({success:i,message:s,cancel:w})=>{if(m.value=!1,d.value=!1,w)return;P({duration:i?1e3:2e3,message:s,type:i?"success":"error"})});const y=i=>{f.emit("editConfig",i)},r=i=>{f.emit("exportConfig",{workspace:i===!0,withQueryFiles:c.uiState.consoleOption.exportWithAdditionalFiles})},p=(i={})=>{f.emit("importConfig",i)};return(i,s)=>{const w=E("vsc-switch"),v=E("vsc-button"),O=T,S=E("pay-badge");return g(),A(N,{class:"!mb-3"},{default:o(()=>[n("div",re,[n("div",ce,t(i.$t("console.configuration")),1),n("section",ue,[n("span",de,t(i.$t("console.exportWithAdditionalFiles"))+":",1),e(w,{modelValue:h(c).uiState.consoleOption.exportWithAdditionalFiles,"onUpdate:modelValue":s[0]||(s[0]=_=>h(c).uiState.consoleOption.exportWithAdditionalFiles=_),onChange:s[1]||(s[1]=_=>h(c).upState("consoleOption"))},null,8,["modelValue"])]),n("section",me,[e(S,{left:0},{default:o(()=>[n("span",pe,t(i.$t("connect.current"))+":",1),e(v,{type:"secondary",icon:"codicon-edit",disabled:!h(c).isPay,size:"mini",onClick:s[2]||(s[2]=_=>y(!0))},null,8,["disabled"]),e(v,{icon:"codicon-arrow-down",disabled:!h(c).isPay,size:"mini",onClick:s[3]||(s[3]=_=>r(!0))},null,8,["disabled"]),e(O,{placement:"top",visible:d.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(v,{icon:"codicon-arrow-up",disabled:!h(c).isPay,size:"mini",onClick:s[7]||(s[7]=_=>p({workspace:!0}))},null,8,["disabled"])]),default:o(()=>[n("p",null,t(i.$t("console.mergeConfirm")),1),n("div",ve,[e(v,{type:"secondary",size:"mini",onClick:s[4]||(s[4]=_=>d.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(v,{onClick:s[5]||(s[5]=_=>p({type:"merge",workspace:!0}))},{default:o(()=>[u(t(i.$t("console.merge")),1)]),_:1}),e(v,{onClick:s[6]||(s[6]=_=>p({type:"overwrite",workspace:!0}))},{default:o(()=>[u(t(i.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])]),_:1})]),n("section",fe,[n("span",_e,t(i.$t("connect.global"))+":",1),e(v,{type:"secondary",icon:"codicon-edit",size:"mini",onClick:y},{default:o(()=>[u(t(i.$t("console.edit")),1)]),_:1}),e(v,{icon:"codicon-arrow-down",size:"mini",onClick:r},{default:o(()=>[u(t(i.$t("console.export")),1)]),_:1}),e(O,{placement:"top",visible:m.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(v,{icon:"codicon-arrow-up",size:"mini",onClick:s[11]||(s[11]=_=>p())},{default:o(()=>[u(t(i.$t("console.import")),1)]),_:1})]),default:o(()=>[n("p",null,t(i.$t("console.mergeConfirm")),1),n("div",ge,[e(v,{type:"secondary",onClick:s[8]||(s[8]=_=>m.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(v,{onClick:s[9]||(s[9]=_=>p({type:"merge"}))},{default:o(()=>[u(t(i.$t("console.merge")),1)]),_:1}),e(v,{onClick:s[10]||(s[10]=_=>p({type:"overwrite"}))},{default:o(()=>[u(t(i.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])])])]),_:1})}}}),Ce={style:{"min-width":"290px"}},$e={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},be={key:0,class:"mt-2 flex items-center"},ke={class:"mr-2"},he={class:"inline-flex-plus btn"},we={style:{"margin-top":"5px","margin-bottom":"10px"}},Se={style:{"text-align":"right",margin:"0"}},ze={style:{"margin-top":"5px","margin-bottom":"10px"}},Ve={style:{"text-align":"right",margin:"0"}},xe={style:{"margin-top":"5px","margin-bottom":"10px"}},Oe={style:{"text-align":"right",margin:"0"}},Ee={class:"mt-3"},Ae=L({__name:"CloudSync",setup(x){const c=G(),m=b(!1),d=b(!1),y=b(!1),r=b(!1),p=b(null),i=b(!1),s=b(!1),w=b(!1),v=b(!1),O=b(null),S=H(()=>/(code-server|Cursor|Trae|Windsurf)/i.test(O.value));J(()=>{m.value=c.config.autoSync,f.on("appName",l=>{O.value=l}).on("downloadConfirm",()=>{w.value=!1,r.value=!0}).on("downloadResult",({success:l,message:a})=>{w.value=!1,P({duration:l?1e3:3e3,message:a,type:l?"success":"error"})}).on("uploadRes",({success:l,message:a})=>{i.value=!1,P({duration:l?1e3:3e3,message:a,type:l?"success":"error"})}).on("removeRes",({success:l,message:a})=>{s.value=!1,P({duration:l?1e3:3e3,message:a,type:l?"success":"error"})}).on("syncKey",l=>{(!p.value||v.value)&&(p.value=l,v.value=!1)})});const _=()=>{f.emit("updateOption",{name:"autoSync",value:m.value})},$=()=>{f.emit("open","https://github.com/cweijan/vscode-database-client/wiki/About-Cloud-Sync")},K=()=>{v.value=!0,f.emit("chooseSyncKey")},z=()=>{if(!c.isPay){Q("Free account not support upload configuration!");return}d.value=!1,i.value=!0,f.emit("uploadConfig",p.value)},X=()=>{y.value=!1,s.value=!0,f.emit("removeConfig")},j=l=>{if(!c.isPay){Q("Free account not support sync data!");return}r.value=!1,w.value=!0,f.emit("downloadConfig",{keyPath:p.value,type:l})},Y=l=>{if(!c.user){Q("Please log in to your account first."),l.stopPropagation();return}};return(l,a)=>{const C=E("vsc-button"),F=E("vsc-switch"),q=T,Z=te;return g(),A(N,{class:"!mb-3"},{default:o(()=>[n("div",Ce,[n("div",$e,[u(t(l.$t("console.sync"))+" ",1),e(C,{class:"ml-2",size:"micro",onClick:$},{default:o(()=>a[10]||(a[10]=[n("i",{class:"el-icon-document"},null,-1)])),_:1})]),S.value?R("",!0):(g(),V("div",be,[n("label",ke,t(l.$t("console.autoSync")),1),e(F,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=k=>m.value=k),onChange:_},null,8,["modelValue"])])),n("div",{class:"mt-2",onClickCapture:Y},[n("div",he,[e(q,{placement:"top",visible:y.value,trigger:"manual"},{reference:o(()=>[e(C,{type:"secondary",size:"mini",icon:"codicon-trash",loading:s.value,onClick:a[2]||(a[2]=k=>y.value=!0)},{default:o(()=>[u(t(l.$t("console.remove")),1)]),_:1},8,["loading"])]),default:o(()=>[n("p",we,t(l.$t("console.removeConfirm")),1),n("div",Se,[e(C,{type:"secondary",size:"mini",onClick:a[1]||(a[1]=k=>y.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(C,{size:"mini",onClick:X},{default:o(()=>[u(t(l.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(q,{placement:"top",visible:d.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(C,{icon:"codicon-cloud-upload",size:"mini",loading:i.value,onClick:a[4]||(a[4]=k=>d.value=!0)},{default:o(()=>[u(t(l.$t("console.upload")),1)]),_:1},8,["loading"])]),default:o(()=>[n("p",ze,t(l.$t("console.uploadConfirm")),1),n("div",Ve,[e(C,{type:"secondary",onClick:a[3]||(a[3]=k=>d.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(C,{onClick:z},{default:o(()=>[u(t(l.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(q,{placement:"top",visible:r.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(C,{icon:"codicon-cloud-download",size:"mini",loading:w.value,onClick:a[8]||(a[8]=k=>j())},{default:o(()=>[u(t(l.$t("console.download")),1)]),_:1},8,["loading"])]),default:o(()=>[n("p",xe,t(l.$t("console.mergeConfirm")),1),n("div",Oe,[e(C,{type:"secondary",onClick:a[5]||(a[5]=k=>r.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(C,{onClick:a[6]||(a[6]=k=>j("merge"))},{default:o(()=>[u(t(l.$t("console.merge")),1)]),_:1}),e(C,{onClick:a[7]||(a[7]=k=>j("overwrite"))},{default:o(()=>[u(t(l.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])]),n("div",Ee,[e(Z,{modelValue:p.value,"onUpdate:modelValue":a[9]||(a[9]=k=>p.value=k),size:"small",class:"!w-56",placeholder:"Sync Encryption Key(Optional)"},null,8,["modelValue"]),e(C,{icon:"codicon-file",size:"mini",class:"!ml-1 relative",style:{top:"3px"},onClick:K})])],32)])]),_:1})}}}),Pe={style:{"min-width":"290px"}},Le={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},We={class:"mt-3 mb-2"},Fe={class:"mt-3 mb-1"},Be=L({__name:"OtherOptions",setup(x){b(!1);const c=()=>{f.emit("clearCache")},m=()=>{f.emit("open","https://github.com/cweijan/vscode-database-client/issues")};return(d,y)=>{const r=E("vsc-button");return g(),A(N,null,{default:o(()=>[n("div",Pe,[n("div",Le,t(d.$t("console.other")),1),n("div",We,[e(r,{icon:"codicon-chrome-close",size:"mini",onClick:y[0]||(y[0]=p=>{h(f).emit("closeAllConnections")})},{default:o(()=>[u(t(d.$t("toolbar.closeAllConnections")),1)]),_:1})]),n("div",Fe,[e(r,{icon:"codicon-github-inverted",size:"mini",onClick:m},{default:o(()=>[u(t(d.$t("toolbar.reportIssue")),1)]),_:1}),e(r,{icon:"codicon-clear-all",size:"mini",onClick:c},{default:o(()=>[u(t(d.$t("toolbar.clearCache")),1)]),_:1})])])]),_:1})}}}),Ne=L({__name:"ConsoleSide",setup(x){return(c,m)=>(g(),V("div",null,[e(ye),e(Ae),e(Be)]))}}),Ke={editor:["enableSQLVariable","enableEditorCodeLens","highlightSQLBlock","bindConnectionByActiveMark"],result:["openResultsAsVertically","splitEditorWhenQuery","autoGetTableCount"],treeView:["showSecurity","saveConnectionExpandedState","terminalLocation"],sql:["escapedAllObjectName","rememberSQLVariables","capitalizeKeywordsWhenFormatting","autoPagingSQL","queryWithSchema"]};function B(x,c){const m=Ke[x];return c.filter(d=>m.includes(d.name)).sort((d,y)=>m.indexOf(d.name)-m.indexOf(y.name))}const U={escapedAllObjectName:[{value:"auto",label:"Auto"},{value:"never",label:"Never"},{value:"always",label:"Always"}],terminalLocation:[{value:"Panel",label:"Panel"},{value:"Editor",label:"Editor"}]},je={class:"flex flex-wrap justify-center console-container"},qe={class:"option-container"},Qe={class:"option-title"},Ie={class:"option-list"},Me={key:0,class:"inline-flex-plus gap-y-0"},Re={class:"shrink-0"},Ue=L({__name:"console",setup(x){const c=b([]),m=H(()=>[{title:W("console.editorOptions"),options:B("editor",c.value),tag:"dbclient-editor"},{title:W("console.sqlOptions"),options:B("sql",c.value),tag:"dbclient-sql-parser"},{title:W("console.treeOptions"),options:B("treeView",c.value)},{title:W("console.resultOptions"),options:B("result",c.value)}]);J(async()=>{f.emit("options").on("options",({options:r})=>{c.value=r}).on("configSuccess",r=>{P({message:r,type:"success"})}).on("resetSuccess",r=>{P({message:r,type:"success"}),f.emit("options")}).init()});const d=r=>{f.emit("resetOption",r)},y=r=>{let p=r.value;r.type=="boolean"&&(p=!r.value,r.value=p),f.emit("updateOption",{...r,value:p})};return(r,p)=>{const i=E("vsc-button"),s=E("vsc-tooltip"),w=ne,v=se,O=le;return g(),V("div",je,[e(Ne),n("div",qe,[(g(!0),V(I,null,M(m.value,(S,_)=>(g(),A(N,{key:_,style:{"max-width":"350px","min-width":"300px"}},{default:o(()=>[n("div",Qe,t(S.title),1),e(s,{title:h(W)("console.resetConfig")},{default:o(()=>[e(i,{icon:"codicon-discard",size:"micro",onClick:$=>d(S.options)},null,8,["onClick"])]),_:2},1032,["title"]),S.tag?(g(),A(s,{key:0,title:"Show More Settings"},{default:o(()=>[e(i,{icon:"codicon-ellipsis",size:"micro",onClick:$=>h(f).emit("openMoreSettings",S.tag)},null,8,["onClick"])]),_:2},1024)):R("",!0),n("div",Ie,[(g(!0),V(I,null,M(S.options,($,K)=>(g(),V("div",{key:K,class:"option-item"},[h(U)[$.name]?(g(),V("div",Me,[n("span",Re,t($.description),1),e(v,{modelValue:$.value,"onUpdate:modelValue":z=>$.value=z,class:"w-28",size:"small",onChange:z=>y($)},{default:o(()=>[(g(!0),V(I,null,M(h(U)[$.name],z=>(g(),A(w,{key:z.value,value:z.value,label:z.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):$.type=="boolean"?(g(),A(O,{key:1,"model-value":$.value,onChange:z=>y($)},{default:o(()=>[u(t($.description),1)]),_:2},1032,["model-value","onChange"])):R("",!0)]))),128))])]),_:2},1024))),128))])])}}}),no=D(Ue,[["__scopeId","data-v-4a4b3018"]]);export{no as default};
