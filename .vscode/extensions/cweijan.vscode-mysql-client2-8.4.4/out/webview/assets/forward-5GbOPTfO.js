import{s as q,a as B,J,e as H,$ as P,K as Q,bn as W,v as i,q as x,w as n,k as e,h as c,f as $,g as D,t as A,L as m,M as E,P as X,S as Y,F as N,j as T,o as d,H as Z,r as L,O as ee,aD as te,ar as oe,x as le}from"./app-DzbCtFXP.js";import{E as ae}from"./index-GP8RpTwj.js";import{a as ne,E as se}from"./index-DkA-wqnD.js";import{a as re,E as ie}from"./index-Ca8W9ip2.js";import{E as G,a as I}from"./index-BExd77YI.js";import"./castArray-DVv5FlX5.js";import"./clone-CX7ngrgR.js";import"./_baseClone-D07UiUvb.js";import"./isEqual-BdMtZB5P.js";import"./_initCloneObject-CUHH2U83.js";import"./index-CAvTKiYZ.js";import"./_baseIteratee-QnkWekc2.js";import"./merge-BN9r680A.js";import"./isArrayLikeObject-Bf7ojnky.js";import"./index-ClCwDGTK.js";const O=q("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});var K=(p=>(p[p.Stop=0]="Stop",p[p.Running=1]="Running",p[p.AlreadyUsed=2]="AlreadyUsed",p))(K||{});const de={class:"mb-2 ml-20"},ue={class:"flex flex-row items-center w-72"},me={class:"forward-arrow"},ce={key:0,class:"el-icon-bottom"},pe={key:1,class:"el-icon-top"},ve={class:"flex flex-row items-center w-72"},fe={class:"flex flex-row"},ye=B({__name:"ForwardDialog",emits:["save"],setup(p,{emit:g}){const f=J({host:null}),S=g,V=O(),o=H(()=>V.panel),u=H(()=>o.value.edit.type=="Dynamic"?"1080":"port"),r=H(()=>{switch(o.value.edit.type){case"Local":return P("ssh.portForward.local");case"Remote":return P("ssh.portForward.remote")}return P("ssh.portForward.dynamic")});Q(()=>o.value.edit.type,v=>{o.value.edit.id||(o.value.edit.remoteHost=v=="Remote"?f.host:"127.0.0.1")}),W(()=>{i.on("config",v=>{Object.assign(f,v)})});const y=()=>{S("save",o.value.edit),o.value.loading=!0};return(v,t)=>{const U=E("RedMark"),R=ie,F=re,k=ne,C=X,h=E("vsc-switch"),z=se,l=E("vsc-button"),b=ae;return d(),x(b,{ref:"editDialog",modelValue:o.value.visible,"onUpdate:modelValue":t[11]||(t[11]=a=>o.value.visible=a),"show-close":!1,title:"Port Fowarding",width:"550px",top:"3vh",closeOnClickModal:!1},{footer:n(()=>[e(l,{type:"secondary",onClick:t[10]||(t[10]=a=>o.value.visible=!1)},{default:n(()=>[m(A(T(P)("common.cancel")),1)]),_:1}),e(l,{loading:o.value.loading,onClick:y},{default:n(()=>t[20]||(t[20]=[m("Save")])),_:1},8,["loading"])]),default:n(()=>[e(z,{ref:"infoForm",model:o.value.edit,"label-width":"120px"},{default:n(()=>[c("div",de,A(r.value),1),e(k,null,{label:n(()=>[e(U),t[12]||(t[12]=m("Type "))]),default:n(()=>[e(F,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.edit.type=a),type:"relax"},{default:n(()=>[e(R,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.edit.type=a),value:"Local"},{default:n(()=>t[13]||(t[13]=[m("Local")])),_:1},8,["modelValue"]),e(R,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.edit.type=a),value:"Remote"},{default:n(()=>t[14]||(t[14]=[m("Remote")])),_:1},8,["modelValue"]),e(R,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.edit.type=a),value:"Dynamic"},{default:n(()=>t[15]||(t[15]=[m(" Dynamic(Socks Proxy) ")])),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(k,null,{label:n(()=>[e(U),t[16]||(t[16]=m("Local "))]),default:n(()=>[c("div",ue,[e(C,{modelValue:o.value.edit.localHost,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.edit.localHost=a),class:"basis-72"},null,8,["modelValue"]),t[17]||(t[17]=c("span",{class:"basis-14 text-center text-base"},":",-1)),e(C,{modelValue:o.value.edit.localPort,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.edit.localPort=a),placeholder:u.value,class:"basis-32"},null,8,["modelValue","placeholder"])])]),_:1}),o.value.edit.type!="Dynamic"?(d(),$(N,{key:0},[c("div",me,[o.value.edit.type=="Remote"?(d(),$("i",ce)):(d(),$("i",pe))]),e(k,null,{label:n(()=>[e(U),t[18]||(t[18]=m("Remote "))]),default:n(()=>[c("div",ve,[e(C,{modelValue:o.value.edit.remoteHost,"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.edit.remoteHost=a),class:"basis-72"},null,8,["modelValue"]),t[19]||(t[19]=c("span",{class:"basis-14 text-center text-base"},":",-1)),e(C,{modelValue:o.value.edit.remotePort,"onUpdate:modelValue":t[7]||(t[7]=a=>o.value.edit.remotePort=a),placeholder:"port",class:"basis-32",onKeyup:Y(y,["enter"])},null,8,["modelValue"])])]),_:1})],64)):D("",!0),c("div",fe,[e(k,{label:"Name",class:"w-64"},{default:n(()=>[e(C,{modelValue:o.value.edit.name,"onUpdate:modelValue":t[8]||(t[8]=a=>o.value.edit.name=a)},null,8,["modelValue"])]),_:1}),e(k,{class:"auto-start-form-item",label:"Auto Start",title:"Auto start with VS Code startup"},{default:n(()=>[e(h,{modelValue:o.value.edit.autoStartUp,"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.edit.autoStartUp=a),class:"ml-2"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),_e=Z(ye,[["__scopeId","data-v-78656478"]]),we={class:"flex justify-start items-center mb-4"},be={class:"space-x-2"},ge=B({__name:"ForwardServerTable",props:{serverList:Array},emits:["selectServer","importConfig","exportConfig"],setup(p,{emit:g}){const f=g,S=()=>{i.emit("importConfig",{type:"merge"})},V=()=>{i.emit("exportConfig")};return(o,u)=>{const r=E("vsc-button"),y=I,v=G;return d(),$("div",null,[c("div",we,[u[3]||(u[3]=c("h2",{class:"text-xl font-semibold mr-4"},"Server Port Forwarding",-1)),c("div",be,[e(r,{type:"primary",size:"micro",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},icon:"codicon-refresh",onClick:u[0]||(u[0]=t=>T(i).emit("load"))}),e(r,{type:"primary",size:"micro",icon:"codicon-arrow-down",onClick:V},{default:n(()=>u[1]||(u[1]=[m("Export")])),_:1}),e(r,{type:"primary",size:"micro",icon:"codicon-arrow-up",onClick:S},{default:n(()=>u[2]||(u[2]=[m("Import")])),_:1})])]),e(v,{data:p.serverList,style:{width:"100%"},class:"rounded-md shadow-sm"},{default:n(()=>[e(y,{prop:"key",label:"Key",width:"150",align:"center"}),e(y,{prop:"name",label:"Name",width:"350",align:"center"}),e(y,{prop:"count",label:"Count",width:"70",align:"center"}),e(y,{label:"Operation",width:"120",align:"center"},{default:n(({row:t})=>[e(r,{type:"icon",icon:"codicon-edit",title:"Edit Configuration",class:"hover:opacity-80",onClick:U=>f("selectServer",t)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])])}}}),Ve={class:"p-3"},ke={class:"mb-3 text-base"},Ce={class:"mr-5"},Be=B({__name:"forward",setup(p){const g=L(""),f=L(null),S=L([]),V=L([]),o=L(!1),u=O(),r=H(()=>u.panel);ee(()=>{i.on("forwardList",l=>{V.value=l,r.value.loading=!1,r.value.visible=!1}).on("importResult",l=>{l.success&&(te(l.message),i.emit("load"))}).on("serverKey",l=>{console.log("serverKey",l),f.value=l}).on("serverList",l=>{S.value=l}).on("name",l=>{g.value=l}).on("success",()=>{i.emit("load")}).on("error",({id:l,message:b})=>{for(const a of V.value)a.id==l&&(a.loading=!1);r.value.loading=!1,oe({message:b,type:"error"})}).init()});const y=l=>{g.value=l.name,f.value=l.key,o.value=!1,i.emit("selectServer",l.key)},v=l=>{i.emit("save",{info:l,serverKey:f.value})},t=()=>{r.value.edit={type:"Local",autoStartUp:!1,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},r.value.visible=!0},U=()=>{i.emit("load")},R=l=>{switch(l){case K.Running:return"Running";case K.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},F=l=>{l.loading=!0,i.emit("start",l.id)},k=l=>{i.emit("stop",l)},C=l=>{i.emit("remove",{id:l,serverKey:f.value})},h=l=>{r.value.edit={...l},r.value.visible=!0},z=l=>{le(P("confirm.deleteForward")).then(()=>{C(l)})};return(l,b)=>{const a=E("vsc-button"),_=I,M=E("vsc-switch"),j=G;return d(),$("div",Ve,[o.value?(d(),x(ge,{key:0,serverList:S.value,onSelectServer:y},null,8,["serverList"])):(d(),$(N,{key:1},[c("div",ke,[c("span",Ce,"Connection: "+A(g.value),1),e(a,{size:"micro",icon:"codicon-refresh text-base",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},onClick:U}),e(a,{size:"micro",icon:"codicon-add text-base",style:{color:"var(--vscode-terminal-ansiCyan)"},onClick:t}),e(a,{size:"micro",icon:"codicon-arrow-left",onClick:b[0]||(b[0]=s=>o.value=!0)},{default:n(()=>b[1]||(b[1]=[m(" Manager ")])),_:1})]),e(j,{data:V.value,style:{width:"100%"}},{default:n(()=>[e(_,{prop:"name",label:"Name"}),e(_,{prop:"type",label:"Type"}),e(_,{prop:"localPort",label:"Local Port"}),e(_,{prop:"remoteHost",label:"Remote Host",width:"120"}),e(_,{prop:"remotePort",label:"Remote Port",width:"120"}),e(_,{prop:"keepAlive",label:"KeepAlive"},{default:n(s=>[e(M,{modelValue:s.row.keepAlive,"onUpdate:modelValue":w=>s.row.keepAlive=w,onChange:w=>v(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(_,{prop:"autoStartUp",label:"AutoStart"},{default:n(s=>[e(M,{modelValue:s.row.autoStartUp,"onUpdate:modelValue":w=>s.row.autoStartUp=w,onChange:w=>v(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(_,{prop:"state",label:"State"},{default:n(s=>[s.row.state==0?(d(),x(a,{key:0,type:"icon",icon:"el-icon-close text-base text-red"})):s.row.state==1?(d(),x(a,{key:1,type:"icon",icon:"el-icon-check text-base text-green"})):(d(),x(a,{key:2,type:"icon",icon:"el-icon-video-pause text-base text-yellow"})),m(" "+A(R(s.row.state)),1)]),_:1}),e(_,{fixed:"right",width:"200"},{default:n(s=>[s.row.state!=1?(d(),x(a,{key:0,type:"success",size:"mini",title:"Start",loading:s.row.loading,icon:"el-icon-video-play",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},circle:"",onClick:w=>{F(s.row)}},null,8,["loading","onClick"])):D("",!0),s.row.state==1?(d(),x(a,{key:1,type:"danger",size:"mini",title:"Stop",icon:"el-icon-switch-button",circle:"",onClick:w=>{k(s.row.id)}},null,8,["onClick"])):D("",!0),e(a,{type:"primary",size:"mini",title:"Edit",icon:"el-icon-edit",style:{color:"var(--vscode-terminal-ansiCyan)"},circle:"",onClick:w=>{h(s.row)}},null,8,["onClick"]),e(a,{title:"delete",type:"danger",size:"mini",icon:"el-icon-delete",style:{color:"#f56c6c"},circle:"",onClick:w=>z(s.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])],64)),e(_e,{onSave:v})])}}});export{Be as default};
