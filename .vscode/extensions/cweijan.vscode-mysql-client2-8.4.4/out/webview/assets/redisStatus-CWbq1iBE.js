import{a as I,r as u,J as V,e as b,O as M,v as _,a7 as R,f as K,h as t,k as e,w as r,M as x,L as l,t as i,o as w,H as A}from"./app-DzbCtFXP.js";import{E as U}from"./index-B2LYU3pt.js";import{E as D,a as L}from"./index-BExd77YI.js";import"./index-CAvTKiYZ.js";import"./_baseIteratee-QnkWekc2.js";import"./isEqual-BdMtZB5P.js";import"./merge-BN9r680A.js";import"./_initCloneObject-CUHH2U83.js";import"./isArrayLikeObject-Bf7ojnky.js";import"./index-ClCwDGTK.js";const N={id:"app",class:"redis-status-container"},O={class:"mt-3 px-3 flex items-center"},P={class:"grid grid-cols-3 gap-4 mt-4 px-3"},W={class:"col-span-1"},j={class:"box-card p-3 bg-secondBg mb-3"},H={class:"server-status-tag-p"},J={class:"server-status-text"},q={class:"server-status-tag-p"},z=["title"],F={class:"server-status-tag-p"},G={class:"server-status-text"},Q={class:"col-span-1"},X={class:"box-card p-3 bg-secondBg mb-3"},Y={class:"server-status-tag-p"},Z={class:"server-status-text"},$={class:"server-status-tag-p"},ss={class:"server-status-text"},ts={class:"server-status-tag-p"},es={class:"server-status-text"},os={class:"col-span-1"},as={class:"box-card p-3 bg-secondBg mb-3"},ns={class:"server-status-tag-p"},rs={class:"server-status-text"},ls={class:"server-status-tag-p"},is={class:"server-status-text"},ds={class:"server-status-tag-p"},cs={class:"server-status-text"},ps={class:"mt-4 px-3"},us={class:"box-card p-3 bg-secondBg mb-3"},_s={class:"mt-4 px-3"},vs={class:"box-card p-3 bg-secondBg mb-3"},ms=I({__name:"redisStatus",setup(fs){const p=u(!1),v=u(null),y=u(2e3),n=V({}),g=b(()=>{const o=[];for(const s in n)if(s.startsWith("db")){const d=n[s].split(",");o.push({db:s,keys:d[0].split("=")[1],expires:d[1].split("=")[1],avg_ttl:d[2].split("=")[1]})}return o}),h=b(()=>{const o=[];for(const s in n)o.push({key:s,value:n[s]});return o});M(()=>{m(),_.on("info",o=>{T(o)}),_.emit("init")}),R(()=>{clearInterval(v.value)});const m=()=>{v.value=setInterval(()=>{p.value&&_.emit("init")},y.value)},k=(o,s)=>o.keys-s.keys,B=(o,s)=>o.expires-s.expires,S=(o,s)=>o.avg_ttl-s.avg_ttl,T=o=>{if(!o)return{};o=o.split(`
`);const s={};for(let a of o){if(a=a.replace(/\s/gi,""),a.startsWith("#")||!a)continue;const d=a.split(":");s[d[0]]=d[1]}Object.assign(n,s)};return(o,s)=>{const a=U,d=x("vsc-switch"),C=x("vsc-tooltip"),c=L,f=D;return w(),K("div",N,[t("div",O,[e(a,{type:"info",class:"mr-2"},{default:r(()=>s[1]||(s[1]=[t("i",{class:"el-icon-refresh"},null,-1),l(" Auto Refresh ")])),_:1}),e(C,{title:"Auto Refresh Switch, Refresh Every 2 Seconds"},{default:r(()=>[e(d,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=E=>p.value=E),onChange:m},null,8,["modelValue"])]),_:1})]),t("div",P,[t("div",W,[t("div",j,[s[5]||(s[5]=t("span",{class:"text-base mb-2 block"},"Server",-1)),t("p",H,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[2]||(s[2]=l(" Redis Version: ")),t("span",J,i(n.redis_version),1)]),_:1})]),t("p",q,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[3]||(s[3]=l(" OS: ")),t("span",{class:"server-status-text",title:n.os},i(n.os),9,z)]),_:1})]),t("p",F,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[4]||(s[4]=l(" Process ID: ")),t("span",G,i(n.process_id),1)]),_:1})])])]),t("div",Q,[t("div",X,[s[9]||(s[9]=t("span",{class:"text-base mb-2 block"}," Memory",-1)),t("p",Y,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[6]||(s[6]=l(" Used Memory: ")),t("span",Z,i(n.used_memory_human),1)]),_:1})]),t("p",$,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[7]||(s[7]=l(" Used Memory Peak: ")),t("span",ss,i(n.used_memory_peak_human),1)]),_:1})]),t("p",ts,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[8]||(s[8]=l(" Used Memory Lua: ")),t("span",es,i(Math.round(n.used_memory_lua/1024))+"K",1)]),_:1})])])]),t("div",os,[t("div",as,[s[13]||(s[13]=t("span",{class:"text-base mb-2 block"},"Stats",-1)),t("p",ns,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[10]||(s[10]=l(" Connected Clients: ")),t("span",rs,i(n.connected_clients),1)]),_:1})]),t("p",ls,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[11]||(s[11]=l(" Total Connections: ")),t("span",is,i(n.total_connections_received),1)]),_:1})]),t("p",ds,[e(a,{class:"server-status-container",type:"info"},{default:r(()=>[s[12]||(s[12]=l(" Total Commands: ")),t("span",cs,i(n.total_commands_processed),1)]),_:1})])])])]),t("div",ps,[t("div",us,[s[14]||(s[14]=t("span",{class:"text-base mb-2 block"},"Key Statistics",-1)),e(f,{data:g.value},{default:r(()=>[e(c,{prop:"db",label:"DB"}),e(c,{sortable:"",prop:"keys",label:"Keys","sort-method":k}),e(c,{sortable:"",prop:"expires",label:"Expires","sort-method":B}),e(c,{sortable:"",prop:"avg_ttl",label:"Avg TTL","sort-method":S})]),_:1},8,["data"])])]),t("div",_s,[t("div",vs,[s[15]||(s[15]=t("span",{class:"text-base mb-2 block"}," All Redis Info",-1)),e(f,{data:h.value},{default:r(()=>[e(c,{prop:"key",label:"Key"}),e(c,{prop:"value",label:"Value"})]),_:1},8,["data"])])])])}}}),Es=A(ms,[["__scopeId","data-v-122fec95"]]);export{Es as default};
