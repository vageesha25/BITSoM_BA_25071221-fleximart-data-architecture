import{a as A,D as I,r as _,e as L,O as M,bq as O,v as d,f as b,af as j,k as c,ak as B,j as n,h as a,F as E,G as P,w as u,$ as m,M as S,n as C,g as R,L as $,t as q,av as J,q as w,aj as U,br as F,y as H,o as l,H as Q}from"./app-DzbCtFXP.js";import{_ as z}from"./vscode-MMfGApC2.js";import{u as G}from"./resultUIStore-DURbWDYK.js";import{b as g,D as h}from"./DatabaseType-BbdbLm9P.js";import"./wrapper-BXvM5gqA.js";import"./viewUtil-CTdDvppq.js";import"./_commonjsHelpers-CqkleIqs.js";import"./arrayUtil-BBqtGZ24.js";import"./objectUtil-Z6JRxuBJ.js";const K={id:"tableTab",class:"tab"},W=["onClick"],X=A({__name:"Main",setup(Y){const y=O(),v=G(),k=I(),o=_(null),p=_(!1),r=_("result"),T=L(()=>[{id:"design",i18n:"table.design",icon:"codicon-edit",disabled:()=>!p.value},{id:"result",i18n:"table.data",icon:"codicon-database blue"},{id:"log",i18n:"common.log",icon:"codicon-file",hidden:()=>o.value==h.ES},{id:"erDiagram",i18n:"table.erDiagram",icon:"codicon-symbol-class yellow",hidden:()=>g(o.value),disabled:()=>!p.value||g(o.value)},{id:"status",i18n:"table.monitor",icon:"codicon-graph-line",disabled:()=>!v.monitorStatus.hasAnyMonitor,hidden:()=>g(o.value)},{id:"es-status",i18n:"table.monitor",icon:"codicon-graph-line",hidden:()=>o.value!=h.ES}].filter(t=>!t.hidden?.())),f=t=>{typeof t=="string"&&(t={id:t});const{id:e,disabled:s}=t;s?.()||r.value!==e&&(r.value=e,y.push(e),e=="log"&&d.emit("initTerminal"))};M(()=>{r.value=y.currentRoute.value.name,window.addEventListener("message",({data:t})=>{["RUN","DATA"].includes(t.type)&&(o.value=t.content.dbType,["design","result","erDiagram"].includes(r.value)||f("result"))}),d.on("table_info",({singleTable:t,dbType:e,monitorStatus:s})=>{o.value=e,p.value=t,Object.assign(v.monitorStatus,s),p.value||f("result")})});const D=()=>{d.emit("editInVSCode",v.toolbar.sql)},N=()=>{if(!k.isPay)return H(m("plan.premiumNotice"));d.emit("viewJSON")};return(t,e)=>{const s=S("vsc-tooltip"),x=S("router-view");return l(),b("div",null,[j(a("ul",K,[(l(!0),b(E,null,P(T.value,(i,V)=>(l(),b("li",{key:V,class:C(["tab__item",{"tab__item--active":r.value==i.id,disabled:i.disabled?.()}]),onClick:Z=>f(i)},[i.icon?(l(),b("i",{key:0,type:"icon",class:C(i.icon),style:{position:"relative",top:"3px"}},null,2)):R("",!0),$(" "+q(n(m)(i.i18n)),1)],10,W))),128)),c(s,{title:n(m)("table.editInVSCode")},{default:u(()=>[a("div",{class:"panel-icon !pl-2",style:{"border-left":"1px solid var(--border-color)"},onClick:D},e[1]||(e[1]=[a("img",{src:z,alt:"VSCode Logo"},null,-1)]))]),_:1},8,["title"]),c(s,{title:n(m)("table.viewAsJSON")},{default:u(()=>[a("div",{class:"panel-icon",onClick:N},e[2]||(e[2]=[a("i",{class:"codicon-json text-yellow"},null,-1)]))]),_:1},8,["title"]),c(s,{title:n(m)("table.history")},{default:u(()=>[a("div",{class:"panel-icon",onClick:e[0]||(e[0]=i=>n(d).emit("viewHistory"))},e[3]||(e[3]=[a("i",{class:"codicon-history"},null,-1)]))]),_:1},8,["title"])],512),[[B,n(v).showSQLPanel]]),c(x,null,{default:u(({Component:i})=>[c(J,null,{default:u(()=>[(l(),w(F,null,[(l(),w(U(i)))],1024))]),_:2},1024)]),_:1})])}}}),de=Q(X,[["__scopeId","data-v-26cb6133"]]);export{de as default};
